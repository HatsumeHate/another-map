---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by hatsu.
--- DateTime: 03.02.2024 0:17
---
do


    local HeroPool



    function RemoveFromHeroPool(player)

        BlzFrameSetVisible(HeroPool[player].icon, false)
        BlzFrameSetVisible(HeroPool[player].hp_frame, false)
        BlzFrameSetVisible(HeroPool[player].mp_frame, false)

    end

    function AddToHeroPool(player, icon)
        if GetLocalPlayer() ~= Player(player-1) then
            BlzFrameSetTexture(HeroPool[player].icon, icon, 0, true)
            BlzFrameSetVisible(HeroPool[player].icon, true)
            BlzFrameSetVisible(HeroPool[player].hp_frame, true)
            BlzFrameSetVisible(HeroPool[player].mp_frame, true)


                for i = 1, 6 do
                    if i ~= player then
                        BlzFrameClearAllPoints(HeroPool[i].icon)
                        BlzFrameSetPoint(HeroPool[i].icon, FRAMEPOINT_TOPLEFT, GAME_UI, FRAMEPOINT_TOPLEFT, -0.12, -0.03)
                            for x = 1, 6 do
                                if x ~= i and x ~= player and PlayerHero[x] then
                                    BlzFrameClearAllPoints(HeroPool[x].icon)
                                    BlzFrameSetPoint(HeroPool[x].icon, FRAMEPOINT_TOP, HeroPool[i].icon, FRAMEPOINT_BOTTOM, 0., -0.02)
                                end
                            end
                        break
                    end
                end

        end

    end


    function DrawHeroBars()
        for player = 1, 6 do
            HeroPool[player] = {
                icon = BlzCreateFrameByType("BACKDROP", "icon", BlzGetFrameByName("ConsoleUIBackdrop", 0), "", 0),
                hp_frame = BlzCreateSimpleFrame("MyBarEx", GAME_UI, 45),
                mp_frame = BlzCreateSimpleFrame("MyBarEx", GAME_UI, 46)
            }
            BlzFrameSetPoint(HeroPool[player].icon, FRAMEPOINT_TOPLEFT, GAME_UI, FRAMEPOINT_TOPLEFT, -0.12, -0.03)
            BlzFrameSetSize(HeroPool[player].icon, 0.038, 0.038)
            local borderex = BlzCreateFrameByType("BACKDROP", "aaa", HeroPool[player].icon, "", 0)
            BlzFrameSetSize(borderex, 1., 1.)
            BlzFrameSetTexture(borderex, "UI\\inventory_frame.blp", 0, true)
            BlzFrameSetAllPoints(borderex, HeroPool[player].icon)

            BlzFrameSetPoint(HeroPool[player].hp_frame, FRAMEPOINT_TOP, HeroPool[player].icon, FRAMEPOINT_BOTTOM, 0.,0.)
            BlzFrameSetPoint(HeroPool[player].hp_frame, FRAMEPOINT_TOPLEFT, HeroPool[player].icon, FRAMEPOINT_BOTTOMLEFT, 0.,0.)
            BlzFrameSetPoint(HeroPool[player].hp_frame, FRAMEPOINT_TOPRIGHT, HeroPool[player].icon, FRAMEPOINT_BOTTOMRIGHT, 0.,0.)
            BlzFrameSetSize(HeroPool[player].hp_frame, 0.038, 0.005)
            BlzFrameSetTexture(HeroPool[player].hp_frame, "Replaceabletextures\\Teamcolor\\Teamcolor12.blp", 0, true)
            BlzFrameSetPoint(HeroPool[player].mp_frame, FRAMEPOINT_TOP, HeroPool[player].hp_frame, FRAMEPOINT_BOTTOM, 0.,0.)
            BlzFrameSetPoint(HeroPool[player].mp_frame, FRAMEPOINT_TOPLEFT, HeroPool[player].hp_frame, FRAMEPOINT_BOTTOMLEFT, 0.,0.)
            BlzFrameSetPoint(HeroPool[player].mp_frame, FRAMEPOINT_TOPRIGHT, HeroPool[player].hp_frame, FRAMEPOINT_BOTTOMRIGHT, 0.,0.)
            BlzFrameSetSize(HeroPool[player].mp_frame, 0.038, 0.005)
            BlzFrameSetText(BlzGetFrameByName("MyBarExText", 45), "")
            BlzFrameSetText(BlzGetFrameByName("MyBarExText", 46), "")
            BlzFrameSetTexture(HeroPool[player].mp_frame, "Replaceabletextures\\Teamcolor\\Teamcolor13.blp", 0, true)
            BlzFrameSetMinMaxValue(HeroPool[player].hp_frame, 0., 100.)
            BlzFrameSetMinMaxValue(HeroPool[player].mp_frame, 0., 100.)


            BlzFrameSetVisible(HeroPool[player].icon, false)
            BlzFrameSetVisible(HeroPool[player].hp_frame, false)
            BlzFrameSetVisible(HeroPool[player].mp_frame, false)
        end
    end


    function InitAlliedHeroesBar()
        local timer = CreateTimer()

            HeroPool = {}
            DrawHeroBars()

            TimerStart(timer, 1., true, function()
                for player = 1, 6 do
                    if PlayerHero[player] then
                        BlzFrameSetValue(HeroPool[player].hp_frame, GetUnitLifePercent(PlayerHero[player]))
                        BlzFrameSetValue(HeroPool[player].mp_frame, GetUnitManaPercent(PlayerHero[player]))
                    end
                end
            end)


    end

end