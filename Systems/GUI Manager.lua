---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Stasik.
--- DateTime: 01.04.2020 7:04
---
do

    GlobalButton = {}


    CHAR_PANEL = 1
    INV_PANEL = 2
    SKILL_PANEL = 3
    SHOP_PANEL = 4
    TELEPORT_PANEL = 5


    ---@param player_id integer
    ---@param hero unit
    function CreateGUILayoutForPlayer(player_id, hero)
        DrawStatsPanelInterface(player_id)
        DrawInventoryFrames(player_id, hero)
        DrawSkillPanel(player_id)
        DrawShopFrames(player_id)
        AddToPanel(hero, player_id)
        DrawQuartermeisterFrames(player_id)
    end



    function InitGUIManager()

        local ClickTrigger = CreateTrigger()

        for i = 1, 6 do
            GlobalButton[i] = {}

            GlobalButton[i].char_panel_button = CreateSimpleButton("ReplaceableTextures\\CommandButtons\\BTNTomeRed.blp", 0.03, 0.03, nil, FRAMEPOINT_LEFT, FRAMEPOINT_RIGHT, 0.01, 0., GAME_UI)
            CreateTooltip(LOCALE_LIST[my_locale].STAT_PANEL_TOOLTIP_NAME, LOCALE_LIST[my_locale].STAT_PANEL_TOOLTIP_DESCRIPTION, GlobalButton[i].char_panel_button, 0.14, 0.06)
            BlzFrameSetVisible(GlobalButton[i].char_panel_button, false)
            BlzTriggerRegisterFrameEvent(ClickTrigger, GlobalButton[i].char_panel_button, FRAMEEVENT_CONTROL_CLICK)

            GlobalButton[i].inventory_panel_button = CreateSimpleButton("ReplaceableTextures\\CommandButtons\\BTNDustOfAppearance.blp", 0.03, 0.03, GlobalButton[i].char_panel_button, FRAMEPOINT_LEFT, FRAMEPOINT_RIGHT, 0.01, 0., GAME_UI)
            CreateTooltip(LOCALE_LIST[my_locale].INVENTORY_PANEL_TOOLTIP_NAME, LOCALE_LIST[my_locale].INVENTORY_PANEL_TOOLTIP_DESCRIPTION, GlobalButton[i].inventory_panel_button, 0.14, 0.06)
            BlzFrameSetVisible(GlobalButton[i].inventory_panel_button, false)
            BlzTriggerRegisterFrameEvent(ClickTrigger, GlobalButton[i].inventory_panel_button, FRAMEEVENT_CONTROL_CLICK)

            GlobalButton[i].skill_panel_button = CreateSimpleButton("ReplaceableTextures\\CommandButtons\\BTNSpellBookBLS.blp", 0.03, 0.03, GlobalButton[i].inventory_panel_button, FRAMEPOINT_LEFT, FRAMEPOINT_RIGHT, 0.01, 0., GAME_UI)
            CreateTooltip(LOCALE_LIST[my_locale].SKILL_PANEL_TOOLTIP_NAME, LOCALE_LIST[my_locale].SKILL_PANEL_TOOLTIP_DESCRIPTION, GlobalButton[i].skill_panel_button, 0.14, 0.06)
            BlzFrameSetVisible(GlobalButton[i].skill_panel_button, false)
            BlzTriggerRegisterFrameEvent(ClickTrigger, GlobalButton[i].skill_panel_button, FRAMEEVENT_CONTROL_CLICK)

        end


        TimerStart(CreateTimer(), STAT_PANEL_UPDATE, true, StatPanelUpdate)


        TriggerAddAction(ClickTrigger, function()
            local frame = BlzGetTriggerFrame()
            local player = GetPlayerId(GetTriggerPlayer()) + 1
            local panel_type


                for i = 1, 6 do
                    if frame == GlobalButton[i].char_panel_button then
                        panel_type = CHAR_PANEL

                        BlzFrameSetVisible(PlayerStatsFrame[player], not BlzFrameIsVisible(PlayerStatsFrame[player]))
                        break

                    elseif frame == GlobalButton[i].inventory_panel_button then
                        panel_type = INV_PANEL

                        PlayerInventoryFrameState[player] = not PlayerInventoryFrameState[player]

                            if GetLocalPlayer() == Player(player-1) then BlzFrameSetVisible(PlayerInventoryFrame[player], PlayerInventoryFrameState[player]) end

                        RemoveTooltip(player)
                        RemoveSelectionFrames(player)
                        DestroyContextMenu(player)
                        DestroySlider(player)
                        break

                    elseif frame == GlobalButton[i].skill_panel_button then
                        panel_type = SKILL_PANEL

                        SkillPanelFrame[player].state = not SkillPanelFrame[player].state

                            if GetLocalPlayer() == Player(player-1) then
                                BlzFrameSetVisible(SkillPanelFrame[player].main_frame, SkillPanelFrame[player].state)
                                BlzFrameSetVisible(PlayerStatsFrame[player], false)
                            end

                        UpdateSkillList(player)
                        DestroyContextMenu(player)
                        RemoveTooltip(player)

                        break

                    end
                end

            frame = nil
        end)

        --TODO sync changes, test
        --StatsPanelInit()
        TeleporterInit()

    end

end