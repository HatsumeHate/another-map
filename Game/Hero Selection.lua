---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Stasik.
--- DateTime: 15.01.2020 16:52
---
do


    RegisterTestCommand("add", function()
        UnitSetAbilityLevel(PlayerHero[1], "A003", 7)
    end)



    function CreateHeroSelections()

        local DeathTrigger = CreateTrigger()
        local trg = CreateTrigger()
        local barbarian_region = CreateRegion()
        RegionAddRect(barbarian_region, gg_rct_barbarian_select)

        local sorc_region = CreateRegion()
        RegionAddRect(sorc_region, gg_rct_sorceress_select)

        TriggerRegisterEnterRegionSimple(trg, barbarian_region)
        TriggerRegisterEnterRegionSimple(trg, sorc_region)

        TriggerAddAction(trg, function ()
            local region = GetTriggeringRegion()
            local id
            local player_id = GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
            local starting_items = {}
            local starting_skills = {}


                if region == barbarian_region then
                    id = FourCC("HBRB")
                    starting_items[1] = CreateCustomItem("I011", 0., 0.)
                    starting_items[2] = CreateCustomItem("I00X", 0., 0.)
                    starting_items[3] = CreateCustomItem("I010", 0., 0.)
                    starting_items[4] = CreateCustomItem("I00Z", 0., 0.)
                    starting_items[5] = CreateCustomItem("I00Y", 0., 0.)
                    starting_skills[1] = 'A007'
                    starting_skills[2] = 'A00C'
                    starting_skills[3] = 'A00Z'
                else
                    id = FourCC("HSRC")
                    starting_items[1] = CreateCustomItem("I012", 0., 0.)
                    starting_items[2] = CreateCustomItem("I00X", 0., 0.)
                    starting_items[3] = CreateCustomItem("I010", 0., 0.)
                    starting_items[4] = CreateCustomItem("I00Z", 0., 0.)
                    starting_items[5] = CreateCustomItem("I00Y", 0., 0.)
                    starting_skills[1] = 'A003'
                    starting_skills[2] = 'A00J'
                    starting_skills[3] = 'A00D'
                end

                local hero = CreateUnit(Player(player_id), id, GetRectCenterX(gg_rct_starting_location) , GetRectCenterY(gg_rct_starting_location), 270.)
                RemoveUnit(GetTriggerUnit())

                TimerStart(CreateTimer(), 0.1, false, function()
                    player_id = player_id + 1
                    PlayerHero[player_id] = hero

                    TriggerRegisterDeathEvent(DeathTrigger, hero)

                    DrawStatsPanelInterface(player_id)
                    DrawInventoryFrames(player_id, hero)
                    DrawSkillPanel(player_id)
                    DrawShopFrames(player_id)

                    AddToPanel(hero, player_id)
                    AddPointsToPlayer(player_id, 5)


                    for i = 1, #starting_items do
                        EquipItem(hero, starting_items[i], true)
                        UpdateEquipPointsWindow(player_id)
                    end


                    for i = 1, #starting_skills do
                        UnitAddMyAbility(hero, starting_skills[i])
                    end

                    if GetLocalPlayer() == Player(player_id - 1) then
                        BlzFrameSetVisible(CharButton, true)
                        BlzFrameSetVisible(InventoryTriggerButton, true)
                        BlzFrameSetVisible(SkillPanelButton, true)
                        PanCameraToTimed(GetUnitX(hero), GetUnitY(hero), 0.)
                    end


                    DestroyTimer(GetExpiredTimer())
                end)

        end)


        TriggerAddAction(DeathTrigger, function ()
            local hero = GetTriggerUnit()

                TimerStart(CreateTimer(), 15., false, function()
                    ReviveHero(hero, GetRectCenterX(gg_rct_starting_location), GetRectCenterY(gg_rct_starting_location), true)
                    DestroyTimer(GetExpiredTimer())
                end)

        end)


    end

end